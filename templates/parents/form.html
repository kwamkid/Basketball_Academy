{% extends "base.html" %}

{% block title %}{{ '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' if parent else '‡πÄ‡∏û‡∏¥‡πà‡∏°' }}‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á - Basketball Academy{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="{{ url_for('main.index') }}" class="text-decoration-none">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="{{ url_for('parents.list') }}" class="text-decoration-none">‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</a></li>
        <li class="breadcrumb-item active">{{ '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' if parent else '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á' }}</li>
    </ol>
</nav>

<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0 d-flex align-items-center gap-2">
<i class="fas fa-{{ 'user-edit text-warning' if parent else 'user-plus text-primary' }}"></i>        <span>{{ '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á' if parent else '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà' }}</span>
    </h1>
</div>

<div class="row">
    <div class="col-12 col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0 fw-semibold">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</h5>
            </div>
            <div class="card-body p-4">
                <form method="POST">
                    <div class="row g-3">
                        <div class="col-12 col-md-3">
                            <label class="form-label fw-medium">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó <span class="text-danger">*</span></label>
                            <select name="type" class="form-select" required>
                                <option value="father" {% if parent and parent.type == 'father' %}selected{% endif %}>üë® ‡∏Ñ‡∏∏‡∏ì‡∏û‡πà‡∏≠</option>
                                <option value="mother" {% if parent and parent.type == 'mother' %}selected{% endif %}>üë© ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏°‡πà</option>
                            </select>
                        </div>

                        <div class="col-12 col-md-9">
                            <label class="form-label fw-medium">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• <span class="text-danger">*</span></label>
                            <input type="text" name="name" class="form-control" required
                                   value="{{ parent.name if parent else '' }}"
                                   placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ">
                        </div>

                        <div class="col-12 col-md-6">
                            <label class="form-label fw-medium">‡∏≠‡∏≤‡∏ä‡∏µ‡∏û</label>
                            <input type="text" name="occupation" class="form-control"
                                   value="{{ parent.occupation if parent else '' }}"
                                   placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó">
                        </div>

                        <div class="col-12 col-md-6">
                            <label class="form-label fw-medium">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå <span class="text-danger">*</span></label>
                            <input type="tel" name="phone" class="form-control" required
                                   value="{{ parent.phone if parent else '' }}"
                                   placeholder="0812345678"
                                   pattern="[0-9]{10}">
                            <small class="text-muted">‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå 10 ‡∏´‡∏•‡∏±‡∏Å ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏Ç‡∏µ‡∏î</small>
                        </div>

                        <div class="col-12">
                            <label class="form-label fw-medium">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô</label>
                            <textarea name="address" class="form-control" rows="3"
                                      placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ‡∏´‡∏°‡∏π‡πà ‡∏ñ‡∏ô‡∏ô ‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏• ‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå">{{ parent.address if parent else '' }}</textarea>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-{{ 'warning' if parent else 'info' }}">
                            <i class="fas fa-save"></i> {{ '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç' if parent else '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' }}
                        </button>
                        <a href="{{ url_for('parents.list') }}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á -->
    <div class="col-12 col-lg-4">
        <div class="card bg-light border-0">
            <div class="card-body">
                <h5 class="card-title fw-semibold">
                    <i class="fas fa-info-circle text-info"></i> {{ '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á' if parent else '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥' }}
                </h5>

                {% if parent %}
                    {% if students and students|length > 0 %}
                        <p class="text-muted mb-3">‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ö‡∏∏‡∏ï‡∏£‡∏´‡∏•‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:</p>
                        <ul class="list-unstyled">
                            {% for student in students %}
                            <li class="mb-2">
                                <a href="{{ url_for('students.detail', student_id=student.id) }}"
                                   class="text-decoration-none">
                                    <i class="fas fa-user text-primary"></i>
                                    {{ student.firstName }} {{ student.lastName }} ({{ student.nickname }})
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p class="text-muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ</p>
                    {% endif %}

                    <div class="alert alert-info mb-0 mt-3">
                        <i class="fas fa-lightbulb"></i>
                        ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
                    </div>
                {% else %}
                    <ul class="ps-3 mb-0">
                        <li class="mb-2">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ <span class="text-danger">*</span></li>
                        <li class="mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 10 ‡∏´‡∏•‡∏±‡∏Å</li>
                        <li class="mb-2">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á</li>
                    </ul>
                {% endif %}
            </div>
        </div>

        {% if parent %}
        <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö -->
        <div class="card bg-warning bg-opacity-10 border-0 mt-3">
            <div class="card-body">
                <h6 class="fw-semibold text-warning">
                    <i class="fas fa-history"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö
                </h6>
                <small class="text-muted">
                    <p class="mb-1">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: {{ parent.createdAt|thai_datetime if parent.createdAt else '-' }}</p>
                    <p class="mb-0">ID: {{ parent.id }}</p>
                </small>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}